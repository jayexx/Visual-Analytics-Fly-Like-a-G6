<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Visual-Analytics-Fly-Like-a-G6</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Visual-Analytics-Fly-Like-a-G6</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./Overview.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Project_Proposal/Group6_project_proposal.html"> 
<span class="menu-text">Project Proposal</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-detailed-steps" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Detailed steps</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-detailed-steps">    
        <li>
    <a class="dropdown-item" href="./Detailed_steps/DataPrep/DataPrep.html">
 <span class="dropdown-text">Data Preparation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Detailed_steps/Task1/Task1.html">
 <span class="dropdown-text">Task1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Detailed_steps/Task2/Task2.html">
 <span class="dropdown-text">Task2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Detailed_steps/Task3/Task3.html">
 <span class="dropdown-text">Task3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Detailed_steps/Task4/Task4.html">
 <span class="dropdown-text">Task4</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://yuhuiwang.shinyapps.io/ISSS608-G6/"> 
<span class="menu-text">Shinny app</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Userguide.html" aria-current="page"> 
<span class="menu-text">User Guide</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#r-shiny-app-user-guide" id="toc-r-shiny-app-user-guide" class="nav-link active" data-scroll-target="#r-shiny-app-user-guide">R Shiny App User Guide –</a></li>
  <li><a href="#visualising-learning-effectiveness-for-insights-on-northclass-institute" id="toc-visualising-learning-effectiveness-for-insights-on-northclass-institute" class="nav-link" data-scroll-target="#visualising-learning-effectiveness-for-insights-on-northclass-institute">Visualising Learning Effectiveness for Insights on Northclass Institute</a>
  <ul class="collapse">
  <li><a href="#homepage-sidebar-menu" id="toc-homepage-sidebar-menu" class="nav-link" data-scroll-target="#homepage-sidebar-menu">1. <u>Homepage &amp; Sidebar Menu</u></a></li>
  <li><a href="#task-1-knowledge-mastery-weak-links." id="toc-task-1-knowledge-mastery-weak-links." class="nav-link" data-scroll-target="#task-1-knowledge-mastery-weak-links.">2. <u>Task 1: Knowledge Mastery &amp; Weak Links</u>.</a></li>
  <li><a href="#task-2-learners-profile." id="toc-task-2-learners-profile." class="nav-link" data-scroll-target="#task-2-learners-profile.">3. <u>Task 2: Learners’ Profile</u>.</a></li>
  <li><a href="#task-3-learning-modes-and-learners-knowledge-acquisition." id="toc-task-3-learning-modes-and-learners-knowledge-acquisition." class="nav-link" data-scroll-target="#task-3-learning-modes-and-learners-knowledge-acquisition.">4. <u>Task 3 Learning Modes and Learners Knowledge Acquisition</u>.</a></li>
  <li><a href="#task-4-question-difficulty-and-learners-knowledge-level." id="toc-task-4-question-difficulty-and-learners-knowledge-level." class="nav-link" data-scroll-target="#task-4-question-difficulty-and-learners-knowledge-level.">5. <u>Task 4 Question Difficulty and Learners Knowledge Level</u>.</a></li>
  <li><a href="#task-5-recommendations." id="toc-task-5-recommendations." class="nav-link" data-scroll-target="#task-5-recommendations.">6. <u>Task 5 Recommendations</u>.</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="r-shiny-app-user-guide" class="level1">
<h1>R Shiny App User Guide –</h1>
</section>
<section id="visualising-learning-effectiveness-for-insights-on-northclass-institute" class="level1">
<h1>Visualising Learning Effectiveness for Insights on Northclass Institute</h1>
<section id="homepage-sidebar-menu" class="level2">
<h2 class="anchored" data-anchor-id="homepage-sidebar-menu">1. <u>Homepage &amp; Sidebar Menu</u></h2>
<p>This is the landing page for the R Shiny App. It contains an overview of the project, including an Introduction to the Scope, the Raw Datasets and the Main Objectives of the project.</p>
<p>1.1.The Sidebar Panel pops up in the default view but can be hidden away or reopened with the button (with 3 lines). Navigation through the Sidebar Panel guides the user through the various components of the App, which is structured into the five key analysis tasks of the project.</p>
<p><img src="images/截屏2024-06-30 21.32.45.png" class="img-fluid"></p>
</section>
<section id="task-1-knowledge-mastery-weak-links." class="level2">
<h2 class="anchored" data-anchor-id="task-1-knowledge-mastery-weak-links.">2. <u>Task 1: Knowledge Mastery &amp; Weak Links</u>.</h2>
<p>Clicking on Task 1 brings the user to the Data Visualisation for Task 1.</p>
<p>2.1.&nbsp; In this section, there are 2 Tabs at the top allowing users to switch views between analyzing weak links by individual questions or by knowledge areas.</p>
<p>2.2.&nbsp; For the 1<sup>st</sup> tab, users can observe the heatmap displaying the (1) Knowledge Mastery Metric as the Intensity, (2) Questions in the y-axis, and (3) Knowledge areas in the x-axis. There is only 1 bar in the map for each question, but multiple questions can belong to each knowledge area.</p>
<p>2.2.1. Users may select from 3 different Knowledge Mastery Metrics in the Dropdown Selection List – Normalised Average Highest Score, Non-normalised Average Highest Score and Average No.&nbsp;of Methods Applied on Questions.</p>
<p>2.2.2. Hovering over the heatmap, users can see the precise intensity reading, as well as other details offering more contextual information on each question. Or make use of the various buttons and click-drag to toggle the zoom of the plot.</p>
<p><img src="images/截屏2024-06-30 21.35.03.png" class="img-fluid"></p>
<p>2.3. For the 2<sup>nd</sup> tab, users can observe the charts for weak links by knowledge area, consisting of 3 charts – 2 box plots comparing the distribution of Mastery Points across knowledge areas and sub knowledge areas respectively, and another heat map similar to the 1<sup>st</sup> tab. The box plots are arranged from highest to lowest median mastery points from left to right.</p>
<p>2.3.1. Hovering over points in the box plot, users can see the precise Mastery point reading, whereas hovering over the sides of the box plot, users can see other summary statistics for the box plot. Or make use of the various buttons and click-drag to toggle the zoom of the plot.</p>
<p><img src="images/截屏2024-06-30 21.35.31.png" class="img-fluid"></p>
</section>
<section id="task-2-learners-profile." class="level2">
<h2 class="anchored" data-anchor-id="task-2-learners-profile.">3. <u>Task 2: Learners’ Profile</u>.</h2>
<p>Clicking on Task 2 brings the user to the Data Visualisation for Task 2.</p>
<p>3.1.&nbsp; In this section, there are 2 Tabs at the top allowing users to switch views between the Silhouette Analysis or Parallel Coordinates Plot.</p>
<p>3.2.&nbsp; For the 1<sup>st</sup> tab, users can observe the Silhouette Analysis showing the optimum number of clusters based on the final set of Learning Profile features selected for the project.</p>
<p><img src="images/截屏2024-06-30 21.38.27.png" class="img-fluid"></p>
<p>3.3.&nbsp; For the 2<sup>nd</sup> tab, users can observe the differences between the clusters across selected Learning Profile features in the parallel coordinates plot above and the data table below which lists the distinctive values for each feature for each cluster.</p>
<p>3.3.1. Users may toggle the number of clusters from the slidebar to observe the changes to the parallel coordinates plot and data table.</p>
<p>3.3.2. Hovering over the points in the plot, users can see the precise density reading, whereas hovering over the sides of the box plot, users can see other summary statistics for the box plot. Or make use of the various buttons and click-drag to toggle the zoom of the plot.</p>
<p>3.3.3. Users may also check and uncheck different variables to filter the view in the data table.</p>
<p>3.3.4. Users may also toggle the number of the preferences in each variables to see the top preferences.</p>
<p><img src="images/截屏2024-06-30 21.39.13.png" class="img-fluid"></p>
<p><img src="images/截屏2024-06-30 21.39.29.png" class="img-fluid"></p>
</section>
<section id="task-3-learning-modes-and-learners-knowledge-acquisition." class="level2">
<h2 class="anchored" data-anchor-id="task-3-learning-modes-and-learners-knowledge-acquisition.">4. <u>Task 3 Learning Modes and Learners Knowledge Acquisition</u>.</h2>
<p>Clicking on Task 3 brings the user to the Data Visualisation for Task 3.</p>
<p>4.1.&nbsp; In this section, there are 4 Tabs at the top allowing users to switch views between the Clustering analysis, Knowledge Acquisition Distribution Across Both Clusters, 2-Sample Mean Statistical Test for Both Clusters, and Multi-linear Regression Model.</p>
<p>4.2.&nbsp; For the 1<sup>st</sup> tab, users can observe the Silhouette Analysis above showing the optimum number of clusters based on the final set of features selected for the project, and the Parallel Coordinates Plot below showing the differences between the clusters across selected features.</p>
<p>4.2.1. Users may toggle the number of clusters from the slidebar to observe the changes to the parallel coordinates plot and data table.</p>
<p>4.2.2. Hovering over the points in the Parallel Coordinates plot, users can see the precise density reading, whereas hovering over the sides of the box plot, users can see other summary statistics for the box plot. Or make use of the various buttons and click-drag to toggle the zoom of the plot.</p>
<p><img src="images/截屏2024-06-30 21.40.31.png" class="img-fluid"></p>
<p>4.3.&nbsp; For the 2<sup>nd</sup> tab, users can observe the Ridgeplot Distribution Analysis for Knowledge Acquisition metrics with quantiles across the 2 clusters. The left plot shows the overall Knowledge acquisition for both clusters, while the right plot shows the breakdown into the 8 Knowledge areas.</p>
<p>4.3.1. Users may select from 3 different Knowledge Acquistion Metrics in the Dropdown Selection List – No.&nbsp;of Questions Answered Fully or Partially, Overall Sum of Highest Submission Scores per question and Overall Sum of Question Mastery Points.</p>
<p><img src="images/截屏2024-06-30 21.41.00.png" class="img-fluid"></p>
<p>4.4.&nbsp; For the 3<sup>rd</sup> tab, users can observe the 2-Sample Mean Statistical Test across the 2 clusters, showing (1) the violin plot with (2) the median, as well as the statistical test figures including the (3) coefficient and (4) p-value for 95% level of significance.</p>
<p>4.4.1. Users may select from 3 different Knowledge Acquistion Metrics in the Dropdown Selection List – No.&nbsp;of Questions Answered Fully or Partially, Overall Sum of Highest Submission Scores per question and Overall Sum of Question Mastery Points.</p>
<p><img src="images/截屏2024-06-30 21.41.39.png" class="img-fluid"></p>
<p>4.5.&nbsp; For the 4<sup>th</sup> tab, users can observe the Multiple Linear Regression Analysis showing the statistical significance of the linear relationship between the knowledge acquisition dependent variable against the final set of selected learning mode features as independent variables. The plot above shows Linear regression model for the overall knowledge acquisition indicators, while the plots below show the breakdown into the 8 knowledge areas.</p>
<p>4.5.1. Users may select from 2 different Knowledge Acqusition Metrics in the Dropdown Selection List – Overall Sum of Highest Submission Scores per question and Overall Sum of Question Mastery Points.</p>
<p>4.5.2. Hovering over the points in the Multi-linear regression plot, users can see the precise coefficient estimates, or may make use of the various buttons and click-drag to toggle the zoom of the plot.</p>
<p><img src="images/截屏2024-06-30 21.42.06.png" class="img-fluid"></p>
</section>
<section id="task-4-question-difficulty-and-learners-knowledge-level." class="level2">
<h2 class="anchored" data-anchor-id="task-4-question-difficulty-and-learners-knowledge-level.">5. <u>Task 4 Question Difficulty and Learners Knowledge Level</u>.</h2>
<p>Clicking on Task 4 brings the user to the Data Visualisation for Task 4.</p>
<p>5.1.&nbsp; In this section, users must first select from 2 possible values of 90 and 95% in the Dropdown Selection List for Percentile Threshold in defining High and Low Mastery Students.</p>
<p>5.2.&nbsp;&nbsp;&nbsp; Based on the selection, users can then observe (1) the Dumbbell plot showing the comparison of Percentage of Students that Never got a question correct in the High Mastery Student pool with that of the Low Mastery Student pool, (2) the Lollipop plot showing the Average Error Rate per Question for High Mastery Students, and (3) the Information Characteristic Curves (ICC) showing the questions’ ability to discriminate between High and Low Mastery Students answering performance.</p>
<p><img src="images/截屏2024-06-30 21.43.05.png" class="img-fluid"></p>
<p><img src="images/截屏2024-06-30 21.43.40.png" class="img-fluid"></p>
</section>
<section id="task-5-recommendations." class="level2">
<h2 class="anchored" data-anchor-id="task-5-recommendations.">6. <u>Task 5 Recommendations</u>.</h2>
<p>Clicking on Task 5 brings the user to the Recommendations as part of Task 5 requirements. It consists of recommendations to enhance the Course Design &amp; Management, as well as Recommendations to improve the Question bank, based on insights from Tasks 1 to 4.</p>
<p><img src="images/截屏2024-06-30 21.44.32.png" class="img-fluid"></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>